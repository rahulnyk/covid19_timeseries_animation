D = Data.frame()
D = data.frame()
D = data.frame("category", "value")
View(D)
D = data.frame("category"=c(), "value"=c())
View(D)
D = data.frame(colnames = c("category", "value"))
View(D)
D = data.frame(category = c(), value=c())
View(D)
D = data.frame(category, value)
D = data.frame()
D = data.frame(ncol = 3
)
View(D)
2872887 + 110919 - 22000*12
data("tendulkar2")
install.packages("tendulkar2")
install.packages("datasets.load")
data("tendulkar2")
??datasets.load
install.packages("cricketr")
install.packages("cricketr")
data("tendulkar2")
??cricketr
?cricketr
uninstall.packages("cricketr")
180*24
setwd("~/work/covid19/COVID19India/COVID19_IndiaData")
setwd("~/work/covid19/covid19_timeseries_animation")
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
?scale_y_continuous
data <- d %>%
rename(province = "Province/State", country_region = "Country/Region") %>%
pivot_longer(-c(province, country_region, Lat, Long), names_to = "Date", values_to = "total")  %>%
mutate(date = mdy(Date))%>% mutate(day = as.integer(strftime(date, format = "%j")) ) %>%
filter(total != 0) %>%
## calculate the number of days since first case for each country
group_by(country_region) %>% mutate( days_since_0 = day - min(day)  ) %>% ungroup() %>%
## Calculate total cases per country by summing provinces
group_by(country_region, date, days_since_0) %>% summarise( total = sum(total)) %>%
group_by(country_region) %>%
mutate( max_cases = max(total)) %>%
ungroup() %>%
filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan") ) )
# mutate(label = ifelse(( (total > 5000) | (country_region %in% c("India", "Pakistan") ) ), paste(total, country_region, sep=" | "), NA)) %>%
# filter(  (total > 5000) | ( country_region %in% c("India", "Pakistan") ) )
y_max <- max(data$total)
x_max <- max(data$days_since_0)
x_label <- x_max + 5
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = (y_max/n())*row_number()) %>%
select(country_region, yend)
data <- left_join(data, labels, by = c("country_region") )
View(data)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
warnings()
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
View(data)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
View(data)
View(d)
source_data <- T
yesterday <- Sys.Date() -1
options(
gganimate.nframes = 100,
gganimate.fps=10
)
if (T) {
jhu_url <- paste("https://raw.githubusercontent.com/CSSEGISandData/",
"COVID-19/master/csse_covid_19_data/", "csse_covid_19_time_series/",
"time_series_19-covid-Confirmed.csv", sep = "")
d <- read_csv(jhu_url)
}
data <- d %>%
rename(province = "Province/State", country_region = "Country/Region") %>%
pivot_longer(-c(province, country_region, Lat, Long), names_to = "Date", values_to = "total")  %>%
mutate(date = mdy(Date))%>% mutate(day = as.integer(strftime(date, format = "%j")) ) %>%
filter(total != 0) %>%
## calculate the number of days since first case for each country
group_by(country_region) %>% mutate( days_since_0 = day - min(day)  ) %>% ungroup() %>%
## Calculate total cases per country by summing provinces
group_by(country_region, date, days_since_0) %>% summarise( total = sum(total)) %>%
group_by(country_region) %>%
mutate( max_cases = max(total)) %>%
ungroup() %>%
filter( (max_cases > 2000) | (country_region %in% c("India", "Pakistan") ) ) %>%
mutate(label = paste(total, country_region, sep=" | ") )
View(data)
y_max <- max(data$total)
x_max <- max(data$days_since_0)
x_label <- x_max + 5
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = (y_max/n())*row_number()) %>%
select(country_region, yend)
View(labels)
data <- left_join(data, labels, by = c("country_region") )
View(data)
unique(data$label)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
View(data)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
y_max <- max(data$total)
x_max <- max(data$days_since_0)
x_label <- x_max + 20
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = (log2(y_max)/n())^row_number()) %>%
select(country_region, yend)
data <- left_join(data, labels, by = c("country_region") )
View(data)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = (log2(y_max)/n())^row_number() ) %>%
select(country_region, yend)
View(labels)
data <- left_join(data, labels, by = c("country_region") )
View(data)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
View(labels)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
unique(d$`Country/Region`)
sort( unique(d$`Country/Region`))
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
label$yend
labels$yend
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
View(labels)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( exp( ( log(y_max) / (n()) )*log(row_number()) ) ) ) %>%
select(country_region, yend)
View(labels)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( exp( ( log(y_max) / (n()) )+log(row_number()) ) ) ) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( exp( ( log(y_max) / (n()) ) + row_number() ) ) ) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( 2^( ( log2(y_max) / (n()) ) + log2(row_number()) ) ) ) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( 2^( ( log2(y_max) / (n()) ) + lrow_number()/2 ) ) ) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( 2^( ( log2(y_max) / (n()) ) + row_number()/2 ) ) ) %>%
select(country_region, yend)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( 2^( ( log2(y_max) / (n()) ) + y_max/row_number() ) ) ) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( 2^( ( log2(y_max) / (n()) ) + log2(y_max)/row_number() ) ) ) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>%
mutate(yend = ( 2^( ( log2(y_max / (n())) ) + log2(y_max/row_number()) ) ) ) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( ( log2(y_max / (n())) ) + row_number() ) ) ) %>%
select(country_region, yend)
View(labels)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( ( log2(y_max) / (n()) ) + row_number() ) ) ) %>%
select(country_region, yend)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( ( log2(y_max) / (2*n()) ) + row_number() ) ) ) %>%
select(country_region, yend)
View(labels)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( ( log2(y_max) / (2*n()) ) + row_number() ) ) ) %>%
select(country_region, yend)
View(labels)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( ( log2(y_max/ (n())) ) + log2(row_number()) ) ) ) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( ( log2(y_max/ (n())) ) + log2(row_number()) ) ) ) %>%
select(country_region, yend)
View(labels)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( log2( y_max/ (n()) + log2(row_number())) ))) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( log2( y_max/ (n()) + log2(row_number())) ))) %>%
select(country_region, yend)
View(labels)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( log2( (y_max/ (n())) + row_number()) ))) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^( log2( (y_max/ (n()))*row_number()) ))) %>%
select(country_region, yend)
labels <- data %>%
filter(date == yesterday) %>%
arrange( total ) %>% filter( (max_cases > 1000) | (country_region %in% c("India", "Pakistan", "Bangladesh", "Sri Lanka", "Nepal") ) ) %>%
mutate(yend = ( 2^(  (log2(y_max)/(n()) )*row_number()  ))) %>%
select(country_region, yend)
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
source('~/work/covid19/covid19_timeseries_animation/ts_animation.r')
